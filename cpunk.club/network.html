<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPUNK Network Installation - Setup Your Node</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/network-page.css">
    <link rel="stylesheet" href="css/shared-navigation.css">
    <link rel="stylesheet" href="css/navbar.css">
    <style>
        html, body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
    </style>
</head>
<body>
    <!-- Navbar will be added here by JS -->
    <div class="navbar-placeholder"></div>
    
    <div class="container">
        <!-- Script to load navbar template -->
        <script src="js/translation.js"></script>
        <script src="js/navbar.js"></script>
        <script src="js/sso.js"></script>

        <div class="intro-section">
            <h2 data-i18n="pages.networkQuickInstall">Quick Install CPUNK Network</h2>
            <p data-i18n="pages.networkChooseOs">Choose your operating system and copy the installation command to your terminal.</p>
        </div>
        
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">üêß</div>
                <div class="step-title">Linux Installation</div>
            </div>
            <div class="step-content">
                <p><strong>Copy and paste this command in your terminal:</strong></p>
                <div class="code-block">
                    <pre><span class="command-line">curl -fsSL https://cpunk.club/install.sh | sudo bash</span></pre>
                </div>
                <button class="copy-button" onclick="copyCodeToClipboard(this.previousElementSibling)">Copy Command</button>
                <details style="margin-top: 20px;">
                    <summary style="cursor: pointer; color: var(--primary);">What does this do?</summary>
                    <ul style="margin-top: 10px; color: var(--text-secondary);">
                        <li>Downloads and installs Cellframe node if not already installed</li>
                        <li>Downloads all CPUNK network configuration files</li>
                        <li>Installs certificates to the correct locations</li>
                        <li>Restarts the node service</li>
                        <li>Verifies the installation</li>
                    </ul>
                </details>
            </div>
        </div>

        <div class="step-container">
            <div class="step-header">
                <div class="step-number">ü™ü</div>
                <div class="step-title">Windows Installation</div>
            </div>
            <div class="step-content">
                <p><strong>Copy and paste this command in PowerShell (run as Administrator):</strong></p>
                <div class="code-block">
                    <pre><span class="command-line">iex ((New-Object System.Net.WebClient).DownloadString('https://cpunk.club/install.ps1'))</span></pre>
                </div>
                <button class="copy-button" onclick="copyCodeToClipboard(this.previousElementSibling)">Copy Command</button>
                <details style="margin-top: 20px;">
                    <summary style="cursor: pointer; color: var(--primary);">What does this do?</summary>
                    <ul style="margin-top: 10px; color: var(--text-secondary);">
                        <li>Downloads and installs Cellframe node if not already installed</li>
                        <li>Downloads all CPUNK network configuration files</li>
                        <li>Installs certificates to the correct locations</li>
                        <li>Restarts the node service</li>
                        <li>Verifies the installation</li>
                    </ul>
                </details>
            </div>
        </div>

        <div class="step-container">
            <div class="step-header">
                <div class="step-number">üçé</div>
                <div class="step-title">macOS Installation</div>
            </div>
            <div class="step-content">
                <p><strong>Copy and paste this command in Terminal:</strong></p>
                <div class="code-block">
                    <pre><span class="command-line">curl -fsSL https://cpunk.club/install-mac.sh | bash</span></pre>
                </div>
                <button class="copy-button" onclick="copyCodeToClipboard(this.previousElementSibling)">Copy Command</button>
                <details style="margin-top: 20px;">
                    <summary style="cursor: pointer; color: var(--primary);">What does this do?</summary>
                    <ul style="margin-top: 10px; color: var(--text-secondary);">
                        <li>Downloads and installs Cellframe node if not already installed</li>
                        <li>Downloads all CPUNK network configuration files</li>
                        <li>Installs certificates to the correct locations</li>
                        <li>Restarts the node service</li>
                        <li>Verifies the installation</li>
                    </ul>
                </details>
            </div>
        </div>

        <div class="step-container">
            <div class="step-header">
                <div class="step-number">‚úì</div>
                <div class="step-title">Verify Installation</div>
            </div>
            <div class="step-content">
                <p>After installation completes, verify CPUNK network is active:</p>
                <div class="install-paths">
                    <div class="os-path linux-path">
                        <div class="os-icon">üêß</div>
                        <strong>Linux/macOS:</strong>
                        <div class="code-block">
                            <pre><span class="command-line">/opt/cellframe-node/bin/cellframe-node-cli net list | grep Cpunk</span></pre>
                        </div>
                        <button class="copy-button" onclick="copyCodeToClipboard(this.previousElementSibling)">Copy</button>
                    </div>
                    <div class="os-path windows-path">
                        <div class="os-icon">ü™ü</div>
                        <strong>Windows:</strong>
                        <div class="code-block">
                            <pre><span class="command-line">& "C:\Program Files\cellframe-node\cellframe-node-cli.exe" net list | Select-String "Cpunk"</span></pre>
                        </div>
                        <button class="copy-button" onclick="copyCodeToClipboard(this.previousElementSibling)">Copy</button>
                    </div>
                </div>
                <p style="margin-top: 15px; color: var(--success);">‚úì You should see "Cpunk" in the network list if installation was successful.</p>
            </div>
        </div>

        <div class="step-container" style="background-color: rgba(249, 120, 52, 0.1); border: 1px solid var(--primary);">
            <div class="step-header">
                <div class="step-number">üì•</div>
                <div class="step-title">Manual Installation Files</div>
            </div>
            <div class="step-content">
                <p>If you prefer manual installation, download these files:</p>
                <div class="download-section" style="margin-top: 15px;">
                    <h4>Configuration Files:</h4>
                    <a href="configs/Cpunk.cfg" download class="download-button">Cpunk.cfg</a>
                    <a href="configs/chain-0.cfg" download class="download-button">chain-0.cfg</a>
                    <a href="configs/main.cfg" download class="download-button">main.cfg</a>
                </div>
                <div class="download-section certificate-downloads" style="margin-top: 15px;">
                    <h4>Certificate Files:</h4>
                    <a href="certs/cpunk.root.0.dcert" download class="download-button">cpunk.root.0.dcert</a>
                    <a href="certs/cpunk.root.1.dcert" download class="download-button">cpunk.root.1.dcert</a>
                    <a href="certs/cpunk.root.2.dcert" download class="download-button">cpunk.root.2.dcert</a>
                    <a href="certs/cpunk.master.0.dcert" download class="download-button">cpunk.master.0.dcert</a>
                    <a href="certs/cpunk.master.1.dcert" download class="download-button">cpunk.master.1.dcert</a>
                    <a href="certs/cpunk.master.2.dcert" download class="download-button">cpunk.master.2.dcert</a>
                </div>
                <p style="margin-top: 15px;"><a href="doc/cellframe-node-setup-guide.md" style="color: var(--primary);">View manual installation guide ‚Üí</a></p>
            </div>
        </div>
    </div>
    
    <!-- Utilities Scripts -->
    <script src="js/cpunk-utils.js"></script>
    <script src="js/cpunk-transaction.js"></script>
    <script src="js/cpunk-ui.js"></script>
    <script src="js/cpunk-api-console.js"></script>

    <!-- Copy to clipboard function -->
    <script>
        // Copy code to clipboard function
        window.copyCodeToClipboard = function(codeBlock) {
            const code = codeBlock.querySelector('pre').textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const button = codeBlock.nextElementSibling;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.backgroundColor = 'var(--success)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = '';
                }, 1500);
            }).catch(err => {
                const button = codeBlock.nextElementSibling;
                button.textContent = 'Error!';
                button.style.backgroundColor = 'var(--error)';
                
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.style.backgroundColor = '';
                }, 1500);
            });
        };

        // Initialize SSO
        CpunkSSO.getInstance().init({
            onAuthenticated: (user) => {
                console.log('User authenticated:', user.dna);
            },
            onUnauthenticated: () => {
                console.log('User not authenticated');
            }
        });
    </script>
</body>
</html>